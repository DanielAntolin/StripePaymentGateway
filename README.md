
# StripePaymentGateway
This project is a backend application designed for a business platform. It allows users to create products and purchase items from other users. The payment gateway integrated into the application is Stripe

## ‚ú® Features
- Create users in Stripe and add them to the database.  
- Create products in Stripe and add them to the database.  
- Purchase products from other users.  
- Secure payment processing with Stripe.  
- List acquired products.  

## üì¶ Installation
1. Clone this repository:
2. Create a Stripe account:
3. Sign up for a Stripe account at Stripe.

4. Update Stripe secret in application.yaml:
Open the file stripe-payments/src/main/resources/application.yaml and replace the stripe.secret field with your Stripe secret key from your account.

stripe:

    secret: <your_secret>

5. Set up Stripe CLI:

5.1. Download the latest ZIP file for Windows from the Stripe GitHub releases.

5.2.Extract the file stripe_X.X.X_windows_x86_64.zip.

5.3

Add the path to the extracted stripe.exe file to your system's Environment Variables (Path).
Refer to the official guide if you need help updating environment variables.

5.4

Log in to Stripe via CLI:
Log in to your Stripe account using the following command:
bash

stripe login

Set up a webhook listener:
Start the Stripe webhook listener to forward events to your local application:

bash

stripe listen --forward-to localhost:8080/v1/stripe/webhook  


Update webhook secret in application.yaml:
Copy the webhook secret generated by the previous stripe listen command. Paste it into the application.yaml file under the stripe.endpoint.secret field as follows:

yaml

Copiar c√≥digo

stripe:

  endpoint:

    secret: <your_webhook_secret>

Launch the application using your preferred IDE or build tool. Ensure that all configurations are correctly set before starting the application.
Note: Make sure the terminal running the Stripe listener is still open and listening for webhooks while you run the application.

## üßë‚Äçüíª Usage

Once the application is running, you can use the following features:

1. **Create Users**  
   Use the POST /v1/auth/createUser endpoint to add new users to the platform. Send the user details in the request body.
2. **Create Products**  
   Use the POST /v1/auth/createProduct endpoint to add new products. Send the product details in the request body.
3. **Checkout**
   Use the POST /v1/stripe/checkout endpoint to get a payment URL for a product. Send the customerId and productId in the request body.
4. **View Acquired Products**  
   Use the GET /v1/auth/{userId}/acquired endpoint to view the list of products purchased by a user. Replace {userId} with the user's ID.

5. **API Documentation**  
  The application provides API documentation via Swagger UI, accessible at:
  /api/docs

6. **Webhooks**  
   The application listens for Stripe events through webhooks. Ensure the Stripe CLI is running to forward events to your local application.

